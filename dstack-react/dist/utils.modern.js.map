{"version":3,"file":"utils.modern.js","sources":["../src/utils/parseSearch.js","../src/utils/getDataFailedRequest.js","../src/utils/unicodeBase64Decode.js","../src/utils/formatBytesSize.js","../src/utils/downloadFile.js","../src/utils/parseStackParams.js","../src/utils/parseStackTabs.js","../src/utils/getFormattedDuration.js","../src/utils/getStackCategory.js","../src/utils/fileToBaseTo64.js","../src/config/index.js","../src/utils/dataFetcher.js","../src/utils/parseStackViews.js","../src/utils.js"],"sourcesContent":["const parseSearch = searchString => {\n    const search = searchString.substring(1);\n\n    let params = {};\n\n    if (!search.length)\n        return params;\n\n    try {\n        params = JSON.parse(\n            '{\"'\n            + decodeURIComponent(search).replace(/\"/g, '\\\\\"')\n                .replace(/&/g, '\",\"')\n                .replace(/=/g, '\":\"')\n            + '\"}');\n    } catch (e) {\n        params = {};\n    }\n\n    return params;\n};\n\nexport default parseSearch;","import {get as _get} from 'lodash-es';\n\nconst getDataFailedRequest = responseError => {\n    let error = 'Unknown error';\n\n    try {\n        error = JSON.parse(_get(responseError, 'request.response')).message;\n    } catch (e) {\n        console.log(error, e);\n    }\n\n    const requestStatus = _get(responseError, 'request.status');\n\n    return {error, requestStatus};\n};\n\nexport default getDataFailedRequest;","const unicodeBase64Decode = text => {\n    try {\n        const decodeData = window.atob(text);\n\n        return decodeURIComponent(Array.prototype.map.call(decodeData, c => {\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        }).join(''));\n    } catch (e) {\n        return null;\n    }\n};\n\nexport default unicodeBase64Decode;","const formatBytes = (bytes, decimals) => {\n    if (bytes === 0) return '0 Bytes';\n    \n    let k = 1024;\n\n    let dm = decimals <= 0 ? 0 : decimals || 2;\n\n    let sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n    let i = Math.floor(Math.log(bytes) / Math.log(k));\n    \n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n};\n\nexport default formatBytes;","const downloadFile = ({url, blob, type, fileName}) => {\n    if (blob) {\n        const\n            link = document.createElement('a');\n\n        link.href = window.URL.createObjectURL(new Blob([blob]));\n        link.setAttribute('target', '_blank');\n        link.setAttribute('download', fileName);\n        link.setAttribute('type', type);\n\n        document.body.appendChild(link);\n        link.click();\n        link.parentNode.removeChild(link);\n    }\n\n    if (url) {\n        const\n            link = document.createElement('a');\n\n        link.href = url;\n        link.setAttribute('target', '_blank');\n        link.setAttribute('download', true);\n\n        document.body.appendChild(link);\n        link.click();\n        link.parentNode.removeChild(link);\n    }\n};\n\nexport default downloadFile;","import {uniq} from 'lodash-es';\n\nexport default (attachments, tab) => {\n    const fields = {};\n\n    if (!attachments || !attachments.length)\n        return;\n\n    attachments.forEach(i => {\n        Object.keys(i.params).forEach(key => {\n            if (tab\n                && i.params[tab.value]?.type !== 'tab'\n                && i.params[tab.key]?.title !== tab.value\n            )\n                return;\n\n            if (i.params[key] instanceof Object)\n                return;\n\n            if (fields[key])\n                fields[key].options.push(i.params[key]);\n            else\n                fields[key] = {options: [i.params[key]]};\n        });\n    });\n\n    Object.keys(fields).forEach(key => {\n        fields[key].options = uniq(fields[key].options);\n        fields[key].label = key;\n\n        if (typeof fields[key].options[0] === 'string') {\n            fields[key].type = 'select';\n\n            fields[key].options = fields[key].options\n                .filter((a, b) => fields[key].options.indexOf(a) === b)\n                .map(i => ({\n                    label: i,\n                    value: i,\n                }));\n        }\n\n        if (typeof fields[key].options[0] === 'boolean') {\n            fields[key].type = 'checkbox';\n        }\n\n        if (typeof fields[key].options[0] === 'number') {\n            const options = fields[key].options;\n\n            fields[key].type = 'slider';\n            fields[key].min = Math.min.apply(null, options);\n            fields[key].max = Math.max.apply(null, options);\n\n            fields[key].options = {};\n\n            options\n                .filter((a, b) => options.indexOf(a) === b)\n                .forEach(i => fields[key].options[i] = i);\n        }\n    });\n\n    return fields;\n};\n","export default attachments => {\n    const tabs = [];\n\n    if (!attachments || !attachments.length)\n        return [];\n\n    attachments.forEach(i => {\n        Object.keys(i.params).forEach(key => {\n            if (i.params[key] instanceof Object\n                && i.params[key].type === 'tab'\n            ) {\n                const tab = i.params[key].title || key;\n\n                if (!tabs.find(i => i.value === tab))\n                    tabs.push({\n                        label: tab,\n                        value: tab,\n                        key,\n                    });\n            }\n        });\n    });\n\n    return tabs;\n};\n","import moment from 'moment';\n\nexport default duration => {\n    if (duration < 1000)\n        return '0sec';\n\n    let string = '';\n\n    const momentDuration = moment.duration(duration);\n    const hours = momentDuration.hours();\n    const minutes = momentDuration.minutes();\n    const seconds = momentDuration.seconds();\n\n    if (hours)\n        string += `${moment.duration(hours, 'hours').as('hours')}h`;\n\n    if (minutes)\n        string += ` ${moment.duration(minutes, 'minutes').as('minutes')}min`;\n\n    if (seconds)\n        string += ` ${moment.duration(seconds, 'seconds').asSeconds()}sec`;\n\n    return string;\n};","export default ({application, contentType}) => {\n    switch (true) {\n        case (contentType === 'image/svg+xml'):\n        case (contentType === 'image/png'):\n        case (contentType === 'image/jpeg'):\n        case (application === 'plotly'):\n        case (application === 'bokeh'):\n            return 'chart';\n\n        case (contentType === 'text/csv'):\n            return 'table';\n\n        case (application === 'sklearn'):\n        case (/^tensorflow\\/*/.test(application)):\n        case (/^torch\\/*/.test(application)):\n            return 'mlModel';\n\n        case (application === 'application/python' && contentType === 'application/octet-stream'):\n            return 'app';\n\n        default:\n            return null;\n    }\n};\n","const fileToBase64 = async file => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result.split(',')[1]);\n    reader.onerror = error => reject(error);\n});\n\nexport default fileToBase64;","export default {\n    DOCS_URL: 'http://docs.dstack.ai',\n\n    LOGIN_URL: '/users/login',\n    VERIFY_EMAIL_URL: '/users/verify',\n    SUPPORT_URL: '/support/submit',\n    SIGN_UP_URL: '/users/register',\n    RESET_PASSWORD_URL: '/users/reset',\n    UPDATE_PASSWORD_URL: '/users/update/password',\n\n    ADMIN_USERS_LIST: '/users/admin/list',\n    ADMIN_USERS_CREATE: '/users/admin/create',\n\n    USER_DATA_URL: '/users/remember',\n    CONFIG_INFO_URL: '/config/info',\n    UPDATE_TOKEN_URL: '/users/update/token',\n    UPDATE_SETTINGS_URL: '/users/update/settings',\n    CHECK_USER: userName => `/users/exists/${userName}`,\n\n    STACKS_LIST: userName => `/stacks/${userName}`,\n    DELETE_STACK: () => '/stacks/delete',\n    STACK_DETAILS: (userName, stack) => `/stacks/${userName}/${stack}`,\n    STACK_FRAME: (userName, stack, frameId) => `/frames/${userName}/${stack}/${frameId}`,\n    STACK_ATTACHMENT: (stack, frameId, id) => `/attachs/${stack}/${frameId}/${id}`,\n    STACK_UPDATE: '/stacks/update',\n    STACK_PUSH: '/stacks/push',\n\n    APPS_EXECUTE: '/apps/execute',\n    APPS_POLL: '/apps/poll',\n\n    DASHBOARD_LIST: userName => `/dashboards/${userName}`,\n    DASHBOARD_DETAILS: (userName, id) => `/dashboards/${userName}/${id}`,\n    DASHBOARD_CREATE: '/dashboards/create',\n    DASHBOARD_UPDATE: '/dashboards/update',\n    DASHBOARD_DELETE: '/dashboards/delete',\n    DASHBOARD_CARDS_INSERT: '/dashboards/cards/insert',\n    DASHBOARD_CARDS_UPDATE: '/dashboards/cards/update',\n    DASHBOARD_CARDS_DELETE: '/dashboards/cards/delete',\n\n    JOB_LIST: userName => `/jobs/${userName}`,\n    JOB_DETAILS: (userName, id) => `/jobs/${userName}/${id}`,\n    JOB_CREATE: '/jobs/create',\n    JOB_UPDATE: '/jobs/update',\n    JOB_DELETE: '/jobs/delete',\n    JOB_RUN: '/jobs/run',\n    JOB_STOP: '/jobs/stop',\n\n    PERMISSIONS_ADD: '/permissions/add',\n    PERMISSIONS_DELETE: '/permissions/delete',\n\n    DISCORD_URL: 'https://discord.gg/8xfhEYa',\n    TWITTER_URL: 'https://twitter.com/dstackai',\n    GITHUB_URL: 'https://github.com/dstackai',\n    BLOG_URL: 'https://blog.dstack.ai',\n\n    TOKEN_STORAGE_KEY: 'token',\n};\n\nexport const reportModelPythonCode = `import dstack as ds\nfrom sklearn.linear_model import LogisticRegression\n\nmodel = LogisticRegression()\nmodel.fit(X_train, y_train)\n\nds.push(\"my_model\", model, \"My first linear model\")`;\n\nexport const reportPlotPythonCode = `import matplotlib.pyplot as plt\nimport dstack as ds\n\nfig = plt.figure()\nplt.plot([1, 2, 3, 4], [1, 4, 9, 16])\n\nds.push_frame(\"my_plot\", fig, \"My first plot\")`;\n\nexport const installRPackageCode = 'install.packages(\"dstack\")';\n\nexport const reportPlotRCode = `library(ggplot2)\nlibrary(dstack)\n\ndf <- data.frame(x = c(1, 2, 3, 4), y = c(1, 4, 9, 16))\nimage <- ggplot(data = df, aes(x = x, y = y)) + geom_line()\n\npush_frame(\"simple\", image, \"My first plot\")`;\n","import axios from 'axios';\nimport {get as _get} from 'lodash-es';\nimport config from '../config';\n\nconst fetcher = async (url: string, responseDataFormat = data => data) => {\n    const token = localStorage.getItem(config.TOKEN_STORAGE_KEY);\n\n    try {\n        const request = await axios({\n            url: url,\n            headers: {Authorization: token ? `Bearer ${token}` : ''},\n        });\n\n        return responseDataFormat(request.data);\n    } catch (e) {\n        let errorBody = null;\n\n        let status = null;\n\n        try {\n            errorBody = JSON.parse(_get(e, 'request.response'));\n        } catch (e) {\n            console.log(e);\n        }\n\n        try {\n            status = _get(e, 'request.status');\n        } catch (e) {\n            console.log(e);\n        }\n\n        const error = new Error('An error occurred while fetching the data.');\n\n        error.info = errorBody;\n        error.status = status;\n        throw error;\n    }\n};\n\nexport default fetcher;\n","const typeMap = {\n    'TextFieldView': 'text',\n    'LongTextFieldView': 'textarea',\n    'ComboBoxView': 'select',\n    'SliderView': 'slider',\n    'CheckBoxView': 'checkbox',\n    'ApplyView': 'apply',\n};\n\nexport default views => {\n    const fields = {};\n\n    views.forEach((view, index) => {\n        fields[index] = {\n            label: view.label,\n            type: typeMap[((view.long ? 'Long' : '') + view.type)],\n            value: view.data,\n            disabled: !view.enabled,\n        };\n\n        if (view.type === 'CheckBoxView')\n            fields[index].value = view.selected;\n\n        if (view.type === 'ComboBoxView') {\n            fields[index].options = view.titles.map((title, i) => ({\n                label: title,\n                value: i,\n            }));\n\n            fields[index].value = view.selected;\n            fields[index].multiple = view.multiple;\n        }\n\n        if (view.type === 'SliderView') {\n            fields[index].options = {};\n            view.data.forEach(item => fields[index].options[item] = item);\n\n            fields[index].min = Math.min.apply(null, view.data);\n            fields[index].max = Math.max.apply(null, view.data);\n            fields[index].value = view.data[view.selected];\n        }\n    });\n\n    return fields;\n};\n","import parseSearch from './utils/parseSearch';\nimport getDataFailedRequest from './utils/getDataFailedRequest';\nimport unicodeBase64Decode from './utils/unicodeBase64Decode';\nimport formatBytes from './utils/formatBytesSize';\nimport downloadFile from './utils/downloadFile';\nimport parseStackParams from './utils/parseStackParams';\nimport parseStackTabs from './utils/parseStackTabs';\nimport getFormattedDuration from './utils/getFormattedDuration';\nimport getStackCategory from './utils/getStackCategory';\nimport fileToBaseTo64 from './utils/fileToBaseTo64';\nimport dataFetcher from './utils/dataFetcher';\nimport parseStackViews from './utils/parseStackViews';\nimport config from './config';\n\nconst isSignedIn = () => {\n    const token = localStorage.getItem(config.TOKEN_STORAGE_KEY);\n\n    return Boolean(token && token.length);\n};\n\nexport {\n    isSignedIn,\n    downloadFile,\n    formatBytes,\n    parseSearch,\n    getDataFailedRequest,\n    unicodeBase64Decode,\n    parseStackParams,\n    parseStackTabs,\n    getFormattedDuration,\n    getStackCategory,\n    fileToBaseTo64,\n    dataFetcher,\n    parseStackViews\n};\n"],"names":["parseSearch","searchString","search","substring","params","length","JSON","parse","decodeURIComponent","replace","e","getDataFailedRequest","responseError","error","_get","message","console","log","requestStatus","unicodeBase64Decode","text","decodeData","window","atob","Array","prototype","map","call","c","charCodeAt","toString","slice","join","formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","parseFloat","pow","toFixed","downloadFile","url","blob","type","fileName","link","document","createElement","href","URL","createObjectURL","Blob","setAttribute","body","appendChild","click","parentNode","removeChild","attachments","tab","fields","forEach","Object","keys","key","value","title","options","push","uniq","label","filter","a","b","indexOf","min","apply","max","tabs","find","duration","string","momentDuration","moment","hours","minutes","seconds","as","asSeconds","application","contentType","test","fileToBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","split","onerror","DOCS_URL","LOGIN_URL","VERIFY_EMAIL_URL","SUPPORT_URL","SIGN_UP_URL","RESET_PASSWORD_URL","UPDATE_PASSWORD_URL","ADMIN_USERS_LIST","ADMIN_USERS_CREATE","USER_DATA_URL","CONFIG_INFO_URL","UPDATE_TOKEN_URL","UPDATE_SETTINGS_URL","CHECK_USER","userName","STACKS_LIST","DELETE_STACK","STACK_DETAILS","stack","STACK_FRAME","frameId","STACK_ATTACHMENT","id","STACK_UPDATE","STACK_PUSH","APPS_EXECUTE","APPS_POLL","DASHBOARD_LIST","DASHBOARD_DETAILS","DASHBOARD_CREATE","DASHBOARD_UPDATE","DASHBOARD_DELETE","DASHBOARD_CARDS_INSERT","DASHBOARD_CARDS_UPDATE","DASHBOARD_CARDS_DELETE","JOB_LIST","JOB_DETAILS","JOB_CREATE","JOB_UPDATE","JOB_DELETE","JOB_RUN","JOB_STOP","PERMISSIONS_ADD","PERMISSIONS_DELETE","DISCORD_URL","TWITTER_URL","GITHUB_URL","BLOG_URL","TOKEN_STORAGE_KEY","fetcher","responseDataFormat","data","token","localStorage","getItem","config","request","axios","headers","Authorization","errorBody","status","Error","info","typeMap","views","view","index","long","disabled","enabled","selected","titles","multiple","item","isSignedIn","Boolean"],"mappings":"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"}