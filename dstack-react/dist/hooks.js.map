{"version":3,"file":"hooks.js","sources":["../src/hooks/usePrevious.js","../src/hooks/useOnClickOutside.js","../src/validations/index.js","../src/hooks/useForm.js","../src/hooks/useIntersectionObserver.js","../src/hooks/useDebounce.js","../src/hooks/useTimeout.js","../src/AppStore/actionsTypes.js","../src/AppStore/index.js","../src/hooks/useAppProgress.js"],"sourcesContent":["import {useEffect, useRef} from 'react';\n\nexport default value => {\n    const ref = useRef(value);\n\n    useEffect(() => {\n        ref.current = value;\n    }, [value]);\n\n    return ref.current;\n};\n","import {useEffect} from 'react';\n\nexport default (ref, handler) => {\n    useEffect(\n        () => {\n            const listener = event => {\n                if (!ref.current || ref.current.contains(event.target)) {\n                    return;\n                }\n\n                handler(event);\n            };\n\n            document.addEventListener('mousedown', listener);\n            document.addEventListener('touchstart', listener);\n\n            return () => {\n                document.removeEventListener('mousedown', listener);\n                document.removeEventListener('touchstart', listener);\n            };\n        },\n\n        [ref, handler]\n    );\n};\n","export const isValidUserName = userName => {\n    const errors = {\n        notAllowedCharacters: 'notAllowedCharacters',\n        tooShort: 'tooShort',\n        tooLong: 'tooLong',\n    };\n\n    const testRegexp = /^[a-zA-Z0-9-_]+$/;\n\n    if (userName.length < 3)\n        return {\n            isValid: false,\n            error: errors.tooShort,\n        };\n\n    if (userName.length > 24)\n        return {\n            isValid: false,\n            error: errors.tooLong,\n        };\n\n    if (!testRegexp.test(userName) || /--/.test(userName))\n        return {\n            isValid: false,\n            error: errors.notAllowedCharacters,\n        };\n\n    return {isValid: true};\n};\n\nexport const isEmail = value => {\n    if (!value)\n        return true;\n\n    return /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(value);\n};\n\nexport const isRequired = value => {\n    return !(value === null || value === undefined || value === '');\n};\n\nexport const noSpaces = value => {\n    return /^[\\S]*$/.test(value);\n};\n\nexport const isValidStackName = value => {\n    return /^[^\\/]/.test(value) && /^[a-zA-Z0-9\\/_]+$/.test(value);\n};\n\nexport const isValidEmail = mail => {\n    const errors = {invalidEmailAddress: 'invalidEmailAddress'};\n\n    if (mail && !isEmail(mail))\n        return {\n            isValid: false,\n            error: errors.invalidEmailAddress,\n        };\n\n    return {isValid: true};\n};\n\nexport const isValidPassword = password => {\n    const errors = {mustNotBeEmpty: 'mustNotBeEmpty'};\n\n    if (password.length === 0)\n        return {\n            isValid: false,\n            error: errors.mustNotBeEmpty,\n        };\n\n    return {isValid: true};\n};\n","// @flow\nimport {useState} from 'react';\nimport {isRequired, isEmail, noSpaces, isValidStackName} from '../validations';\n\nconst validationMap = {\n    required: isRequired,\n    email: isEmail,\n    'no-spaces-stack': noSpaces,\n    'stack-name': isValidStackName,\n};\n\nconst getValidationFunction = (validator: Function | string): Function => {\n    if (typeof validator === 'string' && validationMap[validator])\n        return validationMap[validator];\n\n    if (typeof validator === 'function')\n        return validator;\n\n    return () => true;\n};\n\nexport default (\n    initialFormState: {[key: string]: any},\n    fieldsValidators: {[key: string]: Array<Function> | Function} = {}\n): {} => {\n    const [form, setForm] = useState(initialFormState);\n    const [formErrors, setFormErrors] = useState({});\n\n    const onChange = (eventOrName, value) => {\n        let name;\n\n        let fieldValue;\n\n        if (eventOrName.target) {\n            const event = eventOrName;\n\n            fieldValue = event.target.type === 'checkbox'\n                ? event.target.checked\n                : event.target.value;\n\n            name = event.target.name;\n        } else {\n            name = eventOrName;\n            fieldValue = value;\n        }\n\n        setForm({\n            ...form,\n            [name]: fieldValue,\n        });\n\n        setFormErrors({\n            ...formErrors,\n            [name]: [],\n        });\n    };\n\n    const resetForm = () => {\n        setForm(initialFormState);\n        setFormErrors({});\n    };\n\n    const getFieldErrors = fieldName => {\n        const errors = [];\n\n        if (Array.isArray(fieldsValidators[fieldName]))\n            fieldsValidators[fieldName].forEach(validator => {\n                const isValid = getValidationFunction(validator);\n\n                if (!isValid(form[fieldName]))\n                    errors.push(validator);\n            });\n\n        if (typeof fieldsValidators[fieldName] === 'string') {\n            const isValid = getValidationFunction(fieldsValidators[fieldName]);\n\n            if (!isValid(form[fieldName]))\n                errors.push(fieldsValidators[fieldName]);\n        }\n\n        return errors;\n    };\n\n    const checkValidForm = () => {\n        let isValid = true;\n        const newFormErrors = {};\n\n        Object.keys(fieldsValidators)\n            .forEach(fieldName => {\n                const errors = getFieldErrors(fieldName);\n\n                newFormErrors[fieldName] = errors;\n                isValid = isValid && !errors.length;\n            });\n\n        setFormErrors(newFormErrors);\n        return isValid;\n    };\n\n    return {\n        form,\n        setForm,\n        formErrors,\n        setFormErrors,\n        resetForm,\n        onChange,\n        checkValidForm,\n    };\n};\n","// @flow\nimport {useCallback, useEffect, useRef} from 'react';\n\nexport default (\n    callBack: Function,\n\n    {\n        rootMargin = '0px',\n        threshold = 0.01,\n        root = null,\n    }: {[key: string]: any},\n\n    deps: Array<any>\n) => {\n    const ref = useRef(null);\n\n    const intersectionCallback = useCallback(([target]) => {\n        if (target.isIntersecting) {\n            callBack();\n        }\n    }, deps);\n\n    useEffect(() => {\n        const options = {\n            root,\n            rootMargin,\n            threshold,\n        };\n\n        const observer = new IntersectionObserver(intersectionCallback, options);\n\n        if (ref && ref.current)\n            observer.observe(ref.current);\n\n        return () => {\n            if (ref.current)\n                observer.unobserve(ref.current);\n        };\n    }, [ref, intersectionCallback]);\n\n    return [ref];\n};","// @flow\nimport {useCallback} from 'react';\nimport {debounce as _debounce} from 'lodash-es';\n\nexport default (callback: Function, depsOrDelay: Array<any> | number, deps: Array<any>) => {\n    let delay = 300;\n\n    if (typeof depsOrDelay === 'number')\n        delay = depsOrDelay;\n    else\n        deps = depsOrDelay;\n\n\n    return useCallback(_debounce(callback, delay), deps);\n};","// @flow\nimport {useEffect, useCallback, useRef} from 'react';\n\nconst useTimeout = (\n    callback, // function to call. No args passed.\n    timeout = 0, // delay, ms (default: immediately put into JS Event Queue)\n) => {\n    const timeoutIdRef = useRef();\n    const cancel = useCallback(\n        () => {\n            const timeoutId = timeoutIdRef.current;\n\n            if (timeoutId) {\n                timeoutIdRef.current = undefined;\n                clearTimeout(timeoutId);\n            }\n        },\n        [timeoutIdRef],\n    );\n\n    useEffect(\n        () => {\n            timeoutIdRef.current = setTimeout(callback, timeout);\n            return cancel;\n        },\n        [callback, timeout, cancel],\n    );\n\n    return cancel;\n};\n\nexport default useTimeout;","export default {\n    FETCH_CURRENT_USER: 'app/user/FETCH',\n    FETCH_CURRENT_USER_SUCCESS: 'app/user/FETCH_SUCCESS',\n    FETCH_CURRENT_USER_FAIL: 'app/user/FETCH_FAIL',\n\n    FETCH_CONFIG_INFO: 'app/config/FETCH',\n    FETCH_CONFIG_INFO_SUCCESS: 'app/config/FETCH_SUCCESS',\n    FETCH_CONFIG_INFO_FAIL: 'app/config/FETCH_FAIL',\n\n    START_PROGRESS: 'app/START_PROGRESS',\n    SET_PROGRESS: 'app/SET_PROGRESS',\n    COMPLETE_PROGRESS: 'app/COMPLETE_PROGRESS',\n    RESET_PROGRESS: 'app/RESET_PROGRESS',\n};\n","import React, {createContext, useReducer, useContext} from 'react';\nimport actionsTypes from './actionsTypes';\n\nexport {default as actionsTypes} from './actionsTypes';\n\nconst initialState = {\n    currentUser: {\n        loading: false,\n        data: null,\n    },\n    configInfo: {\n        loading: false,\n        data: null,\n    },\n    appProgress: {\n        active: null,\n        value: null,\n    },\n};\n\nexport const reducer = (state = initialState, action) => {\n    switch (action.type) {\n        case (actionsTypes.FETCH_CURRENT_USER):\n            return {\n                ...state,\n                currentUser: {\n                    ...state.currentUser,\n                    loading: true,\n                },\n            };\n\n        case (actionsTypes.FETCH_CURRENT_USER_SUCCESS):\n            return {\n                ...state,\n                currentUser: {\n                    ...state.currentUser,\n                    data: action.payload,\n                    loading: false,\n                },\n            };\n\n        case (actionsTypes.FETCH_CURRENT_USER_FAIL):\n            return {\n                ...state,\n                currentUser: {\n                    ...state.currentUser,\n                    loading: false,\n                },\n            };\n\n\n        case (actionsTypes.FETCH_CONFIG_INFO):\n            return {\n                ...state,\n                configInfo: {\n                    ...state.configInfo,\n                    loading: true,\n                },\n            };\n\n        case (actionsTypes.FETCH_CONFIG_INFO_SUCCESS):\n            return {\n                ...state,\n                configInfo: {\n                    ...state.configInfo,\n                    data: action.payload,\n                    loading: false,\n                },\n            };\n\n        case (actionsTypes.FETCH_CONFIG_INFO_FAIL):\n            return {\n                ...state,\n                configInfo: {\n                    ...state.configInfo,\n                    loading: false,\n                },\n            };\n\n\n        case (actionsTypes.START_PROGRESS):\n            return {\n                ...state,\n                appProgress: {\n                    ...state.appProgress,\n                    active: true,\n                    value: null,\n                },\n            };\n\n        case (actionsTypes.SET_PROGRESS):\n            return {\n                ...state,\n                appProgress: {\n                    ...state.appProgress,\n                    value: action.payload,\n                },\n            };\n\n        case (actionsTypes.COMPLETE_PROGRESS):\n            return {\n                ...state,\n                appProgress: {\n                    ...state.appProgress,\n                    active: false,\n                    value: null,\n                },\n            };\n\n        case (actionsTypes.RESET_PROGRESS):\n            return {\n                ...state,\n                appProgress: {\n                    ...state.appProgress,\n                    active: null,\n                    value: null,\n                },\n            };\n\n        default:\n            return state;\n    }\n};\n\nexport const StateContext = createContext();\n\nexport const AppStoreProvider = ({children, apiUrl}) => (\n    <StateContext.Provider value={useReducer(reducer, {...initialState, apiUrl})}>\n        {children}\n    </StateContext.Provider>\n);\n\nexport const useAppStore = () => useContext(StateContext);\n","import {useAppStore, actionsTypes} from '../AppStore';\n\nexport default () => {\n    const [, dispatch] = useAppStore();\n\n    const startAppProgress = () => {\n        dispatch({type: actionsTypes.START_PROGRESS});\n    };\n\n    const setAppProgress = (progress: ?number) => {\n        dispatch({\n            type: actionsTypes.SET_PROGRESS,\n            payload: progress,\n        });\n    };\n\n    const completeAppProgress = () => {\n        dispatch({type: actionsTypes.COMPLETE_PROGRESS});\n    };\n\n    const resetAppProgress = () => {\n        dispatch({type: actionsTypes.RESET_PROGRESS});\n    };\n\n    return {\n        startAppProgress,\n        setAppProgress,\n        completeAppProgress,\n        resetAppProgress,\n    };\n};\n"],"names":["value","ref","useRef","useEffect","current","handler","listener","event","contains","target","document","addEventListener","removeEventListener","isEmail","test","isRequired","undefined","noSpaces","isValidStackName","validationMap","required","email","getValidationFunction","validator","initialFormState","fieldsValidators","useState","form","setForm","formErrors","setFormErrors","onChange","eventOrName","name","fieldValue","type","checked","resetForm","getFieldErrors","fieldName","errors","Array","isArray","forEach","isValid","push","checkValidForm","newFormErrors","Object","keys","length","callBack","deps","rootMargin","threshold","root","intersectionCallback","useCallback","isIntersecting","options","observer","IntersectionObserver","observe","unobserve","callback","depsOrDelay","delay","_debounce","useTimeout","timeout","timeoutIdRef","cancel","timeoutId","clearTimeout","setTimeout","FETCH_CURRENT_USER","FETCH_CURRENT_USER_SUCCESS","FETCH_CURRENT_USER_FAIL","FETCH_CONFIG_INFO","FETCH_CONFIG_INFO_SUCCESS","FETCH_CONFIG_INFO_FAIL","START_PROGRESS","SET_PROGRESS","COMPLETE_PROGRESS","RESET_PROGRESS","StateContext","createContext","useAppStore","useContext","dispatch","startAppProgress","actionsTypes","setAppProgress","progress","payload","completeAppProgress","resetAppProgress"],"mappings":"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"}